var clicktrack=function(t){this.setup=t};clicktrack.prototype.do=function(){var a=[];({init:function(t){var e=t.utm_name||"clicktrack",o=t.cookie_expires||30,c=t.cookie_domain||document.location.host,n=t.phone_selector||".clicktrack_phone",i=t.phone_slice||-7,a=t.phone_mask||"*-**-**",r=t.phone_showHtml||'<div class="clicktrack_show" href="#">Показать</div>',s=t.phone_onclickScript||'"Error: no targets to send. Set targets first."',_=t.selector_number;utm_name_value=this.getURLParameter(e),"clear"==utm_name_value?(o=-1,this.setCookie(e,o,c,"/"),console.log("cookie_cleared")):"true"!=$.cookie(e)?(null!==utm_name_value&&(this.setCookie(e,o,c,"/"),this.hidePhone(n,i,a,r,s,_)),"clicktrack_ignore_utm"==e&&this.hidePhone(n,i,a,r,s,_)):this.hidePhone(n,i,a,r,s,_)},getURLParameter:function(t){return decodeURIComponent((new RegExp("[?|&]"+t+"=([^&;]+?)(&|#|;|$)").exec(location.search)||[null,""])[1].replace(/\+/g,"%20"))||null},setCookie:function(t,e,o,c){$.cookie(t,"true",{expires:e,path:"/",domain:o})},hidePhone:function(t,e,o,c,n,i){phone_el=$(t),count=1,phone_el.each(function(){_that=$(this),a["clicktrack__"+i+count]=_that.text(),substr=a["clicktrack__"+i+count].slice(e),masked_str=a["clicktrack__"+i+count].replace(substr,o),_that.text(masked_str),phone_showHtml_el=$(c),phone_showHtml_el.attr("id","clicktrack__"+i+count),_that.append(phone_showHtml_el),phone_showHtml_el.click(function(event){new_target=$("#"+event.target.id),target=new_target.parent(),target_phone=event.target.id,target.text(a[target_phone]),target.append('<script type="text/javascript">'+n+"<\/script>"),console.log("Targets sent: "+n)}),count++})}}).init(this.setup)};